import {
  blur
} from "./chunk-R7SAQNPZ.js";
import "./chunk-BHLBIRA6.js";
import {
  CLASS,
  add_locations,
  append_styles,
  attribute_effect,
  bind_this,
  bind_window_size,
  check_target,
  cleanup_styles,
  clsx,
  create_ownership_validator,
  each,
  element,
  hmr,
  if_block,
  legacy_api,
  prop,
  rest_props,
  set_attribute,
  set_class,
  set_style,
  snippet,
  transition,
  validate_binding,
  validate_dynamic_element_tag,
  validate_void_dynamic_element
} from "./chunk-A36D5VZH.js";
import "./chunk-U7P2NEEE.js";
import {
  append,
  comment,
  from_html,
  from_svg,
  set_text,
  text
} from "./chunk-LQZ4L2XB.js";
import {
  $window,
  FILENAME,
  HMR,
  add_svelte_meta,
  apply,
  child,
  delegate,
  delegated,
  event,
  first_child,
  get,
  pop,
  proxy,
  push,
  reset,
  set,
  sibling,
  state,
  strict_equals,
  tag,
  tag_proxy,
  template_effect,
  untrack,
  user_derived,
  user_effect
} from "./chunk-IBJABYZC.js";
import "./chunk-XWATFG4W.js";
import "./chunk-HNWPC2PS.js";
import "./chunk-OHYQYV5R.js";
import "./chunk-BUSYA2B4.js";

// node_modules/svelte-toc/dist/Toc.svelte
Toc[FILENAME] = "node_modules/svelte-toc/dist/Toc.svelte";
var root_3 = add_locations(from_svg(`<svg><path d="M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z" class="s-4xclNQEcWVGh"></path></svg>`), Toc[FILENAME], [[315, 8, [[316, 10]]]]);
var root_1 = add_locations(from_html(`<button><!></button>`), Toc[FILENAME], [[303, 4]]);
var root_9 = add_locations(from_html(`<li role="menuitem"><!></li>`), Toc[FILENAME], [[347, 10]]);
var root_4 = add_locations(from_html(`<nav><!> <ol role="menu"></ol></nav>`), Toc[FILENAME], [[324, 4, [[343, 6]]]]);
var root = add_locations(from_html(`<aside><!> <!></aside>`), Toc[FILENAME], [[289, 0]]);
var $$css = {
  hash: "s-4xclNQEcWVGh",
  code: "\n  :where(aside.toc.s-4xclNQEcWVGh) {\n    box-sizing: border-box;\n    height: -moz-max-content;\n    height: max-content;\n    overflow-wrap: break-word;\n    font-size: var(--toc-font-size, 0.7em);\n    min-width: var(--toc-min-width, 15em);\n    width: var(--toc-width);\n    z-index: var(--toc-z-index);\n    text-wrap: var(--toc-text-wrap, balance);\n    transition: opacity 0.15s;\n  }\n  :where(aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh)) {\n    overflow: var(--toc-overflow, auto);\n    overscroll-behavior: contain;\n    max-height: var(--toc-max-height, 90vh);\n    padding: var(--toc-padding, 1em 1em 0 3em);\n    position: relative;\n  }\n  aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) {\n    list-style: var(--toc-ol-list-style, none);\n    padding: var(--toc-ol-padding, 0);\n    margin: var(--toc-ol-margin);\n  }\n  :where(aside.toc.s-4xclNQEcWVGh .toc-title:where(.s-4xclNQEcWVGh)) {\n    padding: var(--toc-title-padding);\n    margin: var(--toc-title-margin, 1em 0);\n    font-size: var(--toc-title-font-size, initial);\n    color: var(--toc-title-color);\n    font-weight: var(--toc-title-font-weight);\n  }\n  :where(aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) > li:where(.s-4xclNQEcWVGh)) {\n    cursor: pointer;\n    color: var(--toc-li-color);\n    background: var(--toc-li-bg);\n    border: var(--toc-li-border);\n    border-radius: var(--toc-li-border-radius);\n    margin: var(--toc-li-margin);\n    padding: var(--toc-li-padding, 2pt 4pt);\n    font: var(--toc-li-font);\n    transition: var(--toc-li-transition);\n  }\n  aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) > li:where(.s-4xclNQEcWVGh):focus-visible {\n    outline: var(--toc-focus-outline, 2px solid currentColor);\n    outline-offset: var(--toc-focus-outline-offset, 1px);\n  }\n  aside.toc.collapsible.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) > li:where(.s-4xclNQEcWVGh) {\n    max-height: var(--toc-li-max-height, 10em);\n    overflow: hidden;\n    transition:\n      max-height var(--toc-collapse-duration, 0.2s) ease-out,\n      opacity var(--toc-collapse-duration, 0.2s) ease-out,\n      padding var(--toc-collapse-duration, 0.2s) ease-out,\n      margin var(--toc-collapse-duration, 0.2s) ease-out;\n  }\n  aside.toc.collapsible.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) > li.collapsed:where(.s-4xclNQEcWVGh) {\n    max-height: 0;\n    opacity: 0;\n    padding-block: 0;\n    margin-block: 0;\n  }\n  aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) > li:where(.s-4xclNQEcWVGh):hover {\n    color: var(--toc-li-hover-color);\n    background: var(--toc-li-hover-bg);\n  }\n  aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > ol:where(.s-4xclNQEcWVGh) > li.active:where(.s-4xclNQEcWVGh) {\n    background: var(--toc-active-bg);\n    color: var(--toc-active-color);\n    font: var(--toc-active-li-font);\n    text-shadow: var(--toc-active-text-shadow);\n    border: var(--toc-active-border);\n    border-width: var(--toc-active-border-width);\n    border-radius: var(--toc-active-border-radius, 2pt);\n  }\n  :where(aside.toc.s-4xclNQEcWVGh > button:where(.s-4xclNQEcWVGh)) {\n    border: none;\n    bottom: var(--toc-mobile-btn-bottom, 0);\n    cursor: pointer;\n    font: var(--toc-mobile-btn-font, 2em sans-serif);\n    line-height: var(--toc-mobile-btn-line-height, 0);\n    position: absolute;\n    right: var(--toc-mobile-btn-right, 0);\n    z-index: var(--toc-mobile-btn-z-index, 2);\n    padding: var(--toc-mobile-btn-padding, 2pt 3pt);\n    border-radius: var(--toc-mobile-btn-border-radius, 4pt);\n    background: var(--toc-mobile-btn-bg, rgba(255, 255, 255, 0.2));\n    color: var(--toc-mobile-btn-color, black);\n  }\n  :where(aside.toc.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) > .toc-title:where(.s-4xclNQEcWVGh)) {\n    margin-top: var(--toc-title-margin-top, 0);\n  }\n\n  aside.toc.mobile.s-4xclNQEcWVGh {\n    position: fixed;\n    bottom: var(--toc-mobile-bottom, 1em);\n    right: var(--toc-mobile-right, 1em);\n  }\n  aside.toc.mobile.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) {\n    border-radius: var(--toc-mobile-border-radius, 3pt);\n    right: var(--toc-mobile-right, 1em);\n    z-index: -1;\n    box-sizing: border-box;\n    background: var(--toc-mobile-bg, white);\n    width: var(--toc-mobile-width, 18em);\n    box-shadow: var(--toc-mobile-shadow);\n    border: var(--toc-mobile-border);\n  }\n  aside.toc.desktop.s-4xclNQEcWVGh {\n    position: sticky;\n    background: var(--toc-desktop-bg);\n    margin: var(--toc-desktop-aside-margin);\n    max-width: var(--toc-desktop-max-width);\n    top: var(--toc-desktop-sticky-top, 2em);\n  }\n\n  aside.toc.desktop.s-4xclNQEcWVGh > nav:where(.s-4xclNQEcWVGh) {\n    margin: var(--toc-desktop-nav-margin);\n  }\n  aside.toc.intersecting.s-4xclNQEcWVGh {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9jLnN2ZWx0ZSIsInNvdXJjZXMiOlsiVG9jLnN2ZWx0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8c2NyaXB0IGxhbmc9XCJ0c1wiPmltcG9ydCB7IHVudHJhY2sgfSBmcm9tICdzdmVsdGUnO1xuaW1wb3J0IHsgYmx1ciB9IGZyb20gJ3N2ZWx0ZS90cmFuc2l0aW9uJztcbmxldCB7IGFjdGl2ZUhlYWRpbmcgPSAkYmluZGFibGUobnVsbCksIGFjdGl2ZUhlYWRpbmdTY3JvbGxPZmZzZXQgPSAxMDAsIGFjdGl2ZVRvY0xpID0gJGJpbmRhYmxlKG51bGwpLCBhc2lkZSA9ICRiaW5kYWJsZSgpLCBicmVha3BvaW50ID0gMTAwMCwgZGVza3RvcCA9ICRiaW5kYWJsZSh0cnVlKSwgZmxhc2hDbGlja2VkSGVhZGluZ3NGb3IgPSAxNTAwLCBnZXRIZWFkaW5nSWRzID0gKG5vZGUpID0+IG5vZGUuaWQsIGdldEhlYWRpbmdMZXZlbHMgPSAobm9kZSkgPT4gTnVtYmVyKG5vZGUubm9kZU5hbWVbMV0pLCBnZXRIZWFkaW5nVGl0bGVzID0gKG5vZGUpID0+IG5vZGUudGV4dENvbnRlbnQgPz8gYGAsIGhlYWRpbmdzID0gJGJpbmRhYmxlKFtdKSwgaGVhZGluZ1NlbGVjdG9yID0gYDppcyhoMiwgaDMsIGg0KTpub3QoLnRvYy1leGNsdWRlKWAsIGhpZGUgPSAkYmluZGFibGUoZmFsc2UpLCBoaWRlT25JbnRlcnNlY3QgPSBudWxsLCBhdXRvSGlkZSA9IHRydWUsIGtlZXBBY3RpdmVUb2NJdGVtSW5WaWV3ID0gdHJ1ZSwgbWluSXRlbXMgPSAwLCBuYXYgPSAkYmluZGFibGUoKSwgb3BlbiA9ICRiaW5kYWJsZShmYWxzZSksIG9wZW5CdXR0b25MYWJlbCA9IGBPcGVuIHRhYmxlIG9mIGNvbnRlbnRzYCwgcmVhY3RUb0tleXMgPSBbYEFycm93RG93bmAsIGBBcnJvd1VwYCwgYCBgLCBgRW50ZXJgLCBgRXNjYXBlYCwgYFRhYmBdLCBzY3JvbGxCZWhhdmlvciA9IGBzbW9vdGhgLCB0aXRsZSA9IGBPbiB0aGlzIHBhZ2VgLCB0aXRsZVRhZyA9IGBoMmAsIHRvY0l0ZW1zID0gJGJpbmRhYmxlKFtdKSwgd2Fybk9uRW1wdHkgPSBmYWxzZSwgY29sbGFwc2VTdWJoZWFkaW5ncyA9IGZhbHNlLCBibHVyUGFyYW1zID0geyBkdXJhdGlvbjogMjAwIH0sIG9wZW5Ub2NJY29uLCB0aXRsZVNuaXBwZXQsIHRvY0l0ZW0sIG9uT3BlbiwgYXNpZGVTdHlsZSA9IGBgLCBhc2lkZUNsYXNzID0gYGAsIG5hdlN0eWxlID0gYGAsIG5hdkNsYXNzID0gYGAsIHRpdGxlRWxlbWVudFN0eWxlID0gYGAsIHRpdGxlRWxlbWVudENsYXNzID0gYGAsIG9sU3R5bGUgPSBgYCwgb2xDbGFzcyA9IGBgLCBsaVN0eWxlID0gYGAsIGxpQ2xhc3MgPSBgYCwgb3BlbkJ1dHRvblN0eWxlID0gYGAsIG9wZW5CdXR0b25DbGFzcyA9IGBgLCBvcGVuQnV0dG9uSWNvblByb3BzID0ge30sIC4uLnJlc3QgfSA9ICRwcm9wcygpO1xubGV0IHdpbmRvd193aWR0aCA9ICRzdGF0ZSgwKTtcbi8vIHBhZ2VfaGFzX3Njcm9sbGVkIGNvbnRyb2xzIGlnbm9yaW5nIHNwdXJpb3VzIHNjcm9sbGVuZCBldmVudHMgb24gcGFnZSBsb2FkIGJlZm9yZSBhbnkgYWN0dWFsXG4vLyBzY3JvbGxpbmcgaW4gY2hyb21lLiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phbm9zaC9zdmVsdGUtdG9jL2lzc3Vlcy81N1xubGV0IHBhZ2VfaGFzX3Njcm9sbGVkID0gJHN0YXRlKGZhbHNlKTtcbi8vIHRyYWNrcyB3aGV0aGVyIFRPQyBvdmVybGFwcyB3aXRoIGFueSBoaWRlT25JbnRlcnNlY3QgZWxlbWVudHMgKGRlc2t0b3Agb25seSlcbmxldCBpbnRlcnNlY3RpbmcgPSAkc3RhdGUoZmFsc2UpO1xuLy8gdHJhY2tzIHRoZSB0YXJnZXQgaGVhZGluZyBkdXJpbmcgcHJvZ3JhbW1hdGljIHNjcm9sbHMgKGNsaWNrL2tleWJvYXJkLWluaXRpYXRlZClcbi8vIHByZXZlbnRzIHNjcm9sbCBldmVudHMgZnJvbSBpbmNvcnJlY3RseSB1cGRhdGluZyBhY3RpdmVIZWFkaW5nIGR1cmluZyBzbW9vdGggc2Nyb2xsXG5sZXQgc2Nyb2xsX3RhcmdldCA9ICRzdGF0ZShudWxsKTtcbi8vIGZhbGxiYWNrIHRpbWVvdXQgdG8gY2xlYXIgc2Nyb2xsX3RhcmdldCBpZiBzY3JvbGxlbmQgZG9lc24ndCBmaXJlXG4vLyAoZS5nLiwgbm8gc2Nyb2xsIG5lZWRlZCwgb3IgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgc2Nyb2xsZW5kKVxubGV0IHNjcm9sbF90YXJnZXRfdGltZW91dCA9IG51bGw7XG4vLyB0cmFja3MgcHJldmlvdXMgZGlzdGFuY2UgdG8gc2Nyb2xsX3RhcmdldCB0byBkZXRlY3QgbWFudWFsIHNjcm9sbCBkaXJlY3Rpb25cbi8vIGluaXRpYWxpemVkIHRvIEluZmluaXR5IHNvIGZpcnN0IHNjcm9sbCBldmVudCBhbHdheXMgcGFzc2VzIHRoZSBcImRpc3RhbmNlIGluY3JlYXNpbmdcIiBjaGVja1xubGV0IHByZXZfc2Nyb2xsX3RhcmdldF9kaXN0YW5jZSA9IEluZmluaXR5O1xuLy8gaGVscGVyIHRvIGNsZWFyIHNjcm9sbF90YXJnZXQgc3RhdGUgYW5kIGNhbmNlbCBmYWxsYmFjayB0aW1lb3V0XG5mdW5jdGlvbiBjbGVhcl9zY3JvbGxfdGFyZ2V0KCkge1xuICAgIGlmIChzY3JvbGxfdGFyZ2V0X3RpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNjcm9sbF90YXJnZXRfdGltZW91dCk7XG4gICAgICAgIHNjcm9sbF90YXJnZXRfdGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIHNjcm9sbF90YXJnZXQgPSBudWxsO1xuICAgIHByZXZfc2Nyb2xsX3RhcmdldF9kaXN0YW5jZSA9IEluZmluaXR5O1xufVxuLy8gaGVscGVyIHRvIGltbWVkaWF0ZWx5IHNldCBhY3RpdmUgaGVhZGluZyBhbmQgdHJhY2sgc2Nyb2xsIHRhcmdldFxuZnVuY3Rpb24gc2V0X3Njcm9sbF90YXJnZXQobm9kZSkge1xuICAgIGNvbnN0IGlkeCA9IGhlYWRpbmdzLmluZGV4T2Yobm9kZSk7XG4gICAgLy8gb25seSBwcm9jZWVkIGlmIGhlYWRpbmcgZXhpc3RzIGluIGFycmF5IChjb3VsZCBiZSByZW1vdmVkIGJldHdlZW4gY2xpY2sgYW5kIGhhbmRsZXIpXG4gICAgaWYgKGlkeCA8IDApXG4gICAgICAgIHJldHVybjtcbiAgICBhY3RpdmVIZWFkaW5nID0gbm9kZTtcbiAgICBhY3RpdmVUb2NMaSA9IHRvY0l0ZW1zW2lkeF07XG4gICAgc2Nyb2xsX3RhcmdldCA9IG5vZGU7XG4gICAgcHJldl9zY3JvbGxfdGFyZ2V0X2Rpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgLy8gY2xlYXIgYW55IGV4aXN0aW5nIHRpbWVvdXQgYW5kIHNldCBhIG5ldyBmYWxsYmFja1xuICAgIGlmIChzY3JvbGxfdGFyZ2V0X3RpbWVvdXQpXG4gICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxfdGFyZ2V0X3RpbWVvdXQpO1xuICAgIHNjcm9sbF90YXJnZXRfdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjbGVhcl9zY3JvbGxfdGFyZ2V0KCk7XG4gICAgfSwgMTAwMCk7XG59XG5sZXQgbGV2ZWxzID0gJGRlcml2ZWQoaGVhZGluZ3MubWFwKGdldEhlYWRpbmdMZXZlbHMpKTtcbmxldCBtaW5MZXZlbCA9ICRkZXJpdmVkKE1hdGgubWluKC4uLmxldmVscykgfHwgMCk7XG4vLyBDb2xsYXBzZSB0aHJlc2hvbGQ6IHRydWUgLT4gNiAoZnVsbCBuZXN0aW5nKSwgJ2gzJyAtPiAzLCBmYWxzZSAtPiBJbmZpbml0eVxubGV0IGNvbGxhcHNlX3RocmVzaG9sZCA9ICRkZXJpdmVkKGNvbGxhcHNlU3ViaGVhZGluZ3MgPT09IHRydWVcbiAgICA/IDZcbiAgICA6IHR5cGVvZiBjb2xsYXBzZVN1YmhlYWRpbmdzID09PSBgc3RyaW5nYFxuICAgICAgICA/IHBhcnNlSW50KGNvbGxhcHNlU3ViaGVhZGluZ3Muc2xpY2UoMSksIDEwKVxuICAgICAgICA6IEluZmluaXR5KTtcbi8vIENoZWNrIGlmIGhlYWRpbmcgYXQgaWR4IGlzIFwiZXhwYW5kZWRcIiAoYWN0aXZlIG9yIGNvbnRhaW5zIGFjdGl2ZSBpbiBzdWJ0cmVlKVxuZnVuY3Rpb24gaXNfZXhwYW5kZWQoaWR4KSB7XG4gICAgaWYgKGhlYWRpbmdzW2lkeF0gPT09IGFjdGl2ZUhlYWRpbmcpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGNvbnN0IGxldmVsID0gbGV2ZWxzW2lkeF07XG4gICAgZm9yIChsZXQgamR4ID0gaWR4ICsgMTsgamR4IDwgaGVhZGluZ3MubGVuZ3RoICYmIGxldmVsc1tqZHhdID4gbGV2ZWw7IGpkeCsrKSB7XG4gICAgICAgIGlmIChoZWFkaW5nc1tqZHhdID09PSBhY3RpdmVIZWFkaW5nKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIE1lbW9pemVkIHZpc2liaWxpdHkgYXJyYXkgLSBjb21wdXRlZCBvbmNlIHBlciByZW5kZXIgY3ljbGVcbmxldCBoZWFkaW5nX3Zpc2liaWxpdHkgPSAkZGVyaXZlZC5ieSgoKSA9PiB7XG4gICAgaWYgKCFjb2xsYXBzZVN1YmhlYWRpbmdzIHx8IGFjdGl2ZUhlYWRpbmcgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5KGhlYWRpbmdzLmxlbmd0aCkuZmlsbCh0cnVlKTtcbiAgICB9XG4gICAgY29uc3QgdmlzaWJsZSA9IFtdO1xuICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGhlYWRpbmdzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBsZXZlbHNbaWR4XTtcbiAgICAgICAgaWYgKGxldmVsID09PSBtaW5MZXZlbCkge1xuICAgICAgICAgICAgdmlzaWJsZS5wdXNoKHRydWUpOyAvLyB0b3AtbGV2ZWwgYWx3YXlzIHZpc2libGVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZXZlbCA8PSBjb2xsYXBzZV90aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIC8vIEZpbmQgaW1tZWRpYXRlIHBhcmVudCBhbmQgY2hlY2sgaWYgZXhwYW5kZWRcbiAgICAgICAgICAgIGxldCBwYXJlbnRfaWR4ID0gaWR4IC0gMTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnRfaWR4ID49IDAgJiYgbGV2ZWxzW3BhcmVudF9pZHhdID49IGxldmVsKVxuICAgICAgICAgICAgICAgIHBhcmVudF9pZHgtLTtcbiAgICAgICAgICAgIHZpc2libGUucHVzaChwYXJlbnRfaWR4IDwgMCB8fCBpc19leHBhbmRlZChwYXJlbnRfaWR4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBCZXlvbmQgdGhyZXNob2xkIC0gY2hhaW4gdG8gbmVhcmVzdCBhbmNlc3RvciBhdCB0aHJlc2hvbGQgbGV2ZWxcbiAgICAgICAgICAgIGxldCBhbmNlc3Rvcl9pZHggPSBpZHggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKGFuY2VzdG9yX2lkeCA+PSAwICYmIGxldmVsc1thbmNlc3Rvcl9pZHhdID4gY29sbGFwc2VfdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgYW5jZXN0b3JfaWR4LS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aXNpYmxlLnB1c2goYW5jZXN0b3JfaWR4IDwgMCB8fCBsZXZlbHNbYW5jZXN0b3JfaWR4XSA8IGNvbGxhcHNlX3RocmVzaG9sZCB8fFxuICAgICAgICAgICAgICAgIHZpc2libGVbYW5jZXN0b3JfaWR4XSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZpc2libGU7XG59KTtcbiRlZmZlY3QoKCkgPT4gb25PcGVuPy4oeyBvcGVuIH0pKTtcbiRlZmZlY3QoKCkgPT4ge1xuICAgIGRlc2t0b3AgPSB3aW5kb3dfd2lkdGggPiBicmVha3BvaW50O1xufSk7XG4vLyBSZS1jaGVjayBvdmVybGFwIHdoZW4gaGVhZGluZ3Mgb3IgaGlkZU9uSW50ZXJzZWN0IGNoYW5nZVxuJGVmZmVjdCgoKSA9PiB7XG4gICAgdm9pZCBoZWFkaW5nczsgLy8gdHJhY2sgaGVhZGluZ3MgYXMgZGVwZW5kZW5jeVxuICAgIHZvaWQgaGlkZU9uSW50ZXJzZWN0OyAvLyB0cmFjayBwcm9wIGNoYW5nZXNcbiAgICBjaGVja190b2Nfb3ZlcmxhcCgpO1xufSk7XG5mdW5jdGlvbiBjbG9zZShldmVudCkge1xuICAgIGlmICghYXNpZGU/LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpXG4gICAgICAgIG9wZW4gPSBmYWxzZTtcbn1cbi8vIChyZS0pcXVlcnkgaGVhZGluZ3Mgb24gbW91bnQgYW5kIG9uIHJvdXRlIGNoYW5nZXNcbmZ1bmN0aW9uIHVwZGF0ZV90b2NfaGVhZGluZ3MoKSB7XG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gYHVuZGVmaW5lZGApXG4gICAgICAgIHJldHVybjsgLy8gZm9yIFNTUlxuICAgIGNvbnN0IG5ld19oZWFkaW5ncyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChoZWFkaW5nU2VsZWN0b3IpKTtcbiAgICAvLyBVc2UgdW50cmFjayB0byBhdm9pZCBjcmVhdGluZyBkZXBlbmRlbmNpZXMgb24gdGhlIHN0YXRlIHdlJ3JlIGFib3V0IHRvIG1vZGlmeVxuICAgIHVudHJhY2soKCkgPT4ge1xuICAgICAgICBoZWFkaW5ncyA9IG5ld19oZWFkaW5ncztcbiAgICAgICAgc2V0X2FjdGl2ZV9oZWFkaW5nKCk7XG4gICAgICAgIGlmIChoZWFkaW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICh3YXJuT25FbXB0eSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihgc3ZlbHRlLXRvYyBmb3VuZCBubyBoZWFkaW5ncyBmb3IgaGVhZGluZ1NlbGVjdG9yPScke2hlYWRpbmdTZWxlY3Rvcn0nLiAke2F1dG9IaWRlID8gYEhpZGluZ2AgOiBgU2hvd2luZyBlbXB0eWB9IHRhYmxlIG9mIGNvbnRlbnRzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF1dG9IaWRlKVxuICAgICAgICAgICAgICAgIGhpZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhpZGUgJiYgYXV0b0hpZGUpXG4gICAgICAgICAgICBoaWRlID0gZmFsc2U7XG4gICAgfSk7XG59XG4kZWZmZWN0KHVwZGF0ZV90b2NfaGVhZGluZ3MpO1xuJGVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih1cGRhdGVfdG9jX2hlYWRpbmdzKTtcbiAgICAvLyBDb25maWd1cmUgdGhlIG9ic2VydmVyIHRvIHdhdGNoIGZvciBjaGFuZ2VzIGluIHRoZSBET00gc3RydWN0dXJlXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSwgLy8gV2F0Y2ggZm9yIGFkZGVkL3JlbW92ZWQgbm9kZXNcbiAgICAgICAgc3VidHJlZTogdHJ1ZSwgLy8gV2F0Y2ggYWxsIGRlc2NlbmRhbnRzLCBub3QganVzdCBkaXJlY3QgY2hpbGRyZW5cbiAgICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgLy8gV2F0Y2ggZm9yIHRleHQgY29udGVudCBjaGFuZ2VzXG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbn0pO1xuZnVuY3Rpb24gc2V0X2FjdGl2ZV9oZWFkaW5nKCkge1xuICAgIC8vIGlmIHdlJ3JlIGluIGEgcHJvZ3JhbW1hdGljIHNjcm9sbCAoY2xpY2sva2V5Ym9hcmQgaW5pdGlhdGVkKSwga2VlcCB0aGUgdGFyZ2V0IGFjdGl2ZVxuICAgIC8vIHVudGlsIHNjcm9sbGVuZCBmaXJlcyB0byBwcmV2ZW50IGhpZ2hsaWdodGluZyBpbnRlcm1lZGlhdGUgaGVhZGluZ3MgZHVyaW5nIHNtb290aCBzY3JvbGxcbiAgICBpZiAoc2Nyb2xsX3RhcmdldCkge1xuICAgICAgICAvLyBkZXRlY3QgaWYgdXNlciBtYW51YWxseSBzY3JvbGxlZCBhd2F5IGZyb20gc2Nyb2xsX3RhcmdldCBieSBjaGVja2luZyBpZiBkaXN0YW5jZVxuICAgICAgICAvLyBpcyBpbmNyZWFzaW5nICh1c2VyIHNjcm9sbGluZyBhd2F5KSByYXRoZXIgdGhhbiBkZWNyZWFzaW5nIChzbW9vdGggc2Nyb2xsIGluIHByb2dyZXNzKVxuICAgICAgICBjb25zdCB0YXJnZXRfcmVjdCA9IHNjcm9sbF90YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnModGFyZ2V0X3JlY3QudG9wIC0gYWN0aXZlSGVhZGluZ1Njcm9sbE9mZnNldCk7XG4gICAgICAgIC8vIHRocmVzaG9sZCBvZiA1MHB4IGluY3JlYXNlIGRldGVjdHMgbWFudWFsIHNjcm9sbCB3aGlsZSB0b2xlcmF0aW5nIHNjcm9sbCBqaXR0ZXJcbiAgICAgICAgaWYgKGRpc3RhbmNlID4gcHJldl9zY3JvbGxfdGFyZ2V0X2Rpc3RhbmNlICsgNTApIHtcbiAgICAgICAgICAgIC8vIHVzZXIgbWFudWFsbHkgc2Nyb2xsZWQgYXdheSBmcm9tIHRhcmdldCwgY2xlYXIgYW5kIGFsbG93IG5vcm1hbCBkZXRlY3Rpb25cbiAgICAgICAgICAgIGNsZWFyX3Njcm9sbF90YXJnZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNtb290aCBzY3JvbGwgc3RpbGwgaW4gcHJvZ3Jlc3MgKGRpc3RhbmNlIGRlY3JlYXNpbmcgb3Igc3RhYmxlKSwga2VlcCB0YXJnZXQgYWN0aXZlXG4gICAgICAgICAgICBwcmV2X3Njcm9sbF90YXJnZXRfZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgaWR4ID0gaGVhZGluZ3MubGVuZ3RoO1xuICAgIHdoaWxlIChpZHgtLSkge1xuICAgICAgICBjb25zdCB7IHRvcCB9ID0gaGVhZGluZ3NbaWR4XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGhlYWRpbmdzIGZyb20gbGFzdCB0byBmaXJzdCB1bnRpbCB3ZSBmaW5kIG9uZSB0aGF0IHRoZSB2aWV3cG9ydCBhbHJlYWR5XG4gICAgICAgIC8vIHNjcm9sbGVkIHBhc3QuIGlmIG5vbmUgaXMgZm91bmQsIHNldCBtYWtlIGZpcnN0IGhlYWRpbmcgYWN0aXZlXG4gICAgICAgIGlmICh0b3AgPCBhY3RpdmVIZWFkaW5nU2Nyb2xsT2Zmc2V0IHx8IGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgYWN0aXZlSGVhZGluZyA9IGhlYWRpbmdzW2lkeF07XG4gICAgICAgICAgICBhY3RpdmVUb2NMaSA9IHRvY0l0ZW1zW2lkeF07XG4gICAgICAgICAgICByZXR1cm47IC8vIGV4aXQgd2hpbGUgbG9vcCBpZiB1cGRhdGVkIGFjdGl2ZSBoZWFkaW5nXG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBjaGVjayBpZiBUT0Mgb3ZlcmxhcHMgd2l0aCBhbnkgaGlkZU9uSW50ZXJzZWN0IGVsZW1lbnRzIChkZXNrdG9wIG9ubHkpXG5mdW5jdGlvbiBjaGVja190b2Nfb3ZlcmxhcCgpIHtcbiAgICBpZiAoIWhpZGVPbkludGVyc2VjdCB8fCAhYXNpZGUgfHwgIWRlc2t0b3ApIHtcbiAgICAgICAgaW50ZXJzZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudHMgPSB0eXBlb2YgaGlkZU9uSW50ZXJzZWN0ID09PSBgc3RyaW5nYFxuICAgICAgICA/IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChoaWRlT25JbnRlcnNlY3QpKVxuICAgICAgICA6IGhpZGVPbkludGVyc2VjdDtcbiAgICBjb25zdCB0b2MgPSBhc2lkZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBpbnRlcnNlY3RpbmcgPSBlbGVtZW50cy5zb21lKChlbCkgPT4ge1xuICAgICAgICBjb25zdCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiAhKHRvYy5yaWdodCA8IHJlY3QubGVmdCB8fCB0b2MubGVmdCA+IHJlY3QucmlnaHQgfHxcbiAgICAgICAgICAgIHRvYy5ib3R0b20gPCByZWN0LnRvcCB8fCB0b2MudG9wID4gcmVjdC5ib3R0b20pO1xuICAgIH0pO1xufVxuLy8gY2xpY2sgYW5kIGtleSBoYW5kbGVyIGZvciBUb0MgaXRlbXMgdGhhdCBzY3JvbGxzIHRvIHRoZSBoZWFkaW5nXG5jb25zdCBsaV9jbGlja19rZXlfaGFuZGxlciA9IChub2RlKSA9PiAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBLZXlib2FyZEV2ZW50ICYmICFbYEVudGVyYCwgYCBgXS5pbmNsdWRlcyhldmVudC5rZXkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3BlbiA9IGZhbHNlO1xuICAgIHNldF9zY3JvbGxfdGFyZ2V0KG5vZGUpOyAvLyBpbW1lZGlhdGVseSBzZXQgYWN0aXZlIGhlYWRpbmcgdG8gcHJldmVudCBmbGlja2VyIGR1cmluZyBzY3JvbGxcbiAgICBub2RlLnNjcm9sbEludG9WaWV3Py4oeyBiZWhhdmlvcjogc2Nyb2xsQmVoYXZpb3IsIGJsb2NrOiBgc3RhcnRgIH0pO1xuICAgIGNvbnN0IGlkID0gZ2V0SGVhZGluZ0lkcyhub2RlKTtcbiAgICBpZiAoaWQpXG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBgYCwgYCMke2lkfWApO1xuICAgIGlmIChmbGFzaENsaWNrZWRIZWFkaW5nc0Zvcikge1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoYHRvYy1jbGlja2VkYCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbm9kZS5jbGFzc0xpc3QucmVtb3ZlKGB0b2MtY2xpY2tlZGApLCBmbGFzaENsaWNrZWRIZWFkaW5nc0Zvcik7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNjcm9sbF90b19hY3RpdmVfdG9jX2l0ZW0oYmVoYXZpb3IgPSBgc21vb3RoYCkge1xuICAgIGlmIChrZWVwQWN0aXZlVG9jSXRlbUluVmlldyAmJiBhY3RpdmVUb2NMaSAmJiBuYXYpIHtcbiAgICAgICAgLy8gc2Nyb2xsIHRoZSBhY3RpdmUgVG9DIGl0ZW0gaW50byB0aGUgbWlkZGxlIG9mIHRoZSBUb0MgY29udGFpbmVyXG4gICAgICAgIGNvbnN0IHRvcCA9IGFjdGl2ZVRvY0xpPy5vZmZzZXRUb3AgLSBuYXYub2Zmc2V0SGVpZ2h0IC8gMjtcbiAgICAgICAgbmF2Py5zY3JvbGxUbz8uKHsgdG9wLCBiZWhhdmlvciB9KTtcbiAgICB9XG59XG4vLyBlbnN1cmUgYWN0aXZlIFRvQyBpcyBpbiB2aWV3IHdoZW4gVG9DIG9wZW5zIG9uIG1vYmlsZVxuJGVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9wZW4gJiYgbmF2KSB7XG4gICAgICAgIHNldF9hY3RpdmVfaGVhZGluZygpO1xuICAgICAgICBzY3JvbGxfdG9fYWN0aXZlX3RvY19pdGVtKGBpbnN0YW50YCk7XG4gICAgfVxufSk7XG4vLyBlbmFibGUga2V5Ym9hcmQgbmF2aWdhdGlvblxuZnVuY3Rpb24gb25fa2V5ZG93bihldmVudCkge1xuICAgIGlmICghcmVhY3RUb0tleXMgfHwgIXJlYWN0VG9LZXlzLmluY2x1ZGVzKGV2ZW50LmtleSkpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBgOmhvdmVyYC5hdCgtMSkgcmV0dXJucyB0aGUgbW9zdCBkZWVwbHkgbmVzdGVkIGhvdmVyZWQgZWxlbWVudFxuICAgIGNvbnN0IGhvdmVyZWQgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgOmhvdmVyYCldLmF0KC0xKTtcbiAgICBjb25zdCB0b2NfaXNfaG92ZXJlZCA9IGhvdmVyZWQgJiYgbmF2Py5jb250YWlucyhob3ZlcmVkKTtcbiAgICBpZiAoXG4gICAgLy8gcmV0dXJuIGVhcmx5IGlmIFRvQyBkb2VzIG5vdCBoYXZlIGZvY3VzXG4gICAgKGV2ZW50LmtleSA9PT0gYFRhYmAgJiYgIW5hdj8uY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHx8XG4gICAgICAgIC8vIGlnbm9yZSBrZXlib2FyZCBldmVudHMgd2hlbiBUb0MgaXMgY2xvc2VkIG9uIG1vYmlsZSBvciB3aGVuIFRvQyBpcyBub3QgY3VycmVudGx5IGhvdmVyZWQgb24gZGVza3RvcFxuICAgICAgICAoIWRlc2t0b3AgJiYgIW9wZW4pIHx8XG4gICAgICAgIChkZXNrdG9wICYmICF0b2NfaXNfaG92ZXJlZCkpXG4gICAgICAgIHJldHVybjtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChldmVudC5rZXkgPT09IGBFc2NhcGVgICYmIG9wZW4pXG4gICAgICAgIG9wZW4gPSBmYWxzZTtcbiAgICBlbHNlIGlmIChldmVudC5rZXkgPT09IGBUYWJgICYmICFhc2lkZT8uY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgb3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgICBlbHNlIGlmIChhY3RpdmVUb2NMaSkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBgQXJyb3dEb3duYCkge1xuICAgICAgICAgICAgbGV0IG5leHQgPSBhY3RpdmVUb2NMaS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAvLyBza2lwIGNvbGxhcHNlZCBpdGVtcyB3aGVuIGNvbGxhcHNlU3ViaGVhZGluZ3MgaXMgZW5hYmxlZFxuICAgICAgICAgICAgd2hpbGUgKG5leHQ/LmNsYXNzTGlzdC5jb250YWlucyhgY29sbGFwc2VkYCkpIHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gbmV4dC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV4dClcbiAgICAgICAgICAgICAgICBhY3RpdmVUb2NMaSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gYEFycm93VXBgKSB7XG4gICAgICAgICAgICBsZXQgcHJldiA9IGFjdGl2ZVRvY0xpLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAvLyBza2lwIGNvbGxhcHNlZCBpdGVtcyB3aGVuIGNvbGxhcHNlU3ViaGVhZGluZ3MgaXMgZW5hYmxlZFxuICAgICAgICAgICAgd2hpbGUgKHByZXY/LmNsYXNzTGlzdC5jb250YWlucyhgY29sbGFwc2VkYCkpIHtcbiAgICAgICAgICAgICAgICBwcmV2ID0gcHJldi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZXYpXG4gICAgICAgICAgICAgICAgYWN0aXZlVG9jTGkgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBhY3RpdmUgaGVhZGluZ1xuICAgICAgICBhY3RpdmVIZWFkaW5nID0gaGVhZGluZ3NbdG9jSXRlbXMuaW5kZXhPZihhY3RpdmVUb2NMaSldO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlVG9jTGkgJiYgW2AgYCwgYEVudGVyYF0uaW5jbHVkZXMoZXZlbnQua2V5KSAmJiBhY3RpdmVIZWFkaW5nKSB7XG4gICAgICAgIHNldF9zY3JvbGxfdGFyZ2V0KGFjdGl2ZUhlYWRpbmcpO1xuICAgICAgICBhY3RpdmVIZWFkaW5nLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IHNjcm9sbEJlaGF2aW9yLCBibG9jazogYHN0YXJ0YCB9KTtcbiAgICB9XG59XG48L3NjcmlwdD5cblxuPHN2ZWx0ZTp3aW5kb3dcbiAgYmluZDppbm5lcldpZHRoPXt3aW5kb3dfd2lkdGh9XG4gIG9uc2Nyb2xsPXsoKSA9PiB7XG4gICAgcGFnZV9oYXNfc2Nyb2xsZWQgPSB0cnVlXG4gICAgc2V0X2FjdGl2ZV9oZWFkaW5nKClcbiAgICBjaGVja190b2Nfb3ZlcmxhcCgpXG4gIH19XG4gIG9uY2xpY2s9e2Nsb3NlfVxuICBvbnNjcm9sbGVuZD17KCkgPT4ge1xuICAgIC8vIGNsZWFyIHNjcm9sbCB0YXJnZXQgYW5kIGNhbmNlbCBmYWxsYmFjayB0aW1lb3V0XG4gICAgY2xlYXJfc2Nyb2xsX3RhcmdldCgpXG4gICAgaWYgKCFwYWdlX2hhc19zY3JvbGxlZCkgcmV0dXJuXG4gICAgLy8gd2FpdCBmb3Igc2Nyb2xsIGVuZCBzaW5jZSBDaHJvbWUgZG9lc24ndCBzdXBwb3J0IG11bHRpcGxlIHNpbXVsdGFuZW91cyBzY3JvbGxzLFxuICAgIC8vIHNtb290aCBvciBvdGhlcndpc2UgKGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82MzU2MzQzNylcbiAgICBzY3JvbGxfdG9fYWN0aXZlX3RvY19pdGVtKClcbiAgfX1cbiAgb25yZXNpemU9eygpID0+IHtcbiAgICBkZXNrdG9wID0gd2luZG93X3dpZHRoID4gYnJlYWtwb2ludFxuICAgIHNldF9hY3RpdmVfaGVhZGluZygpXG4gICAgY2hlY2tfdG9jX292ZXJsYXAoKVxuICB9fVxuICBvbmtleWRvd249e29uX2tleWRvd259XG4vPlxuXG48YXNpZGVcbiAgey4uLnJlc3R9XG4gIGNsYXNzPVwidG9jIHthc2lkZUNsYXNzIHx8IG51bGx9XCJcbiAgY2xhc3M6Y29sbGFwc2libGU9e2NvbGxhcHNlU3ViaGVhZGluZ3N9XG4gIGNsYXNzOmRlc2t0b3BcbiAgY2xhc3M6aGlkZGVuPXtoaWRlfVxuICBjbGFzczppbnRlcnNlY3RpbmdcbiAgY2xhc3M6bW9iaWxlPXshZGVza3RvcH1cbiAgYmluZDp0aGlzPXthc2lkZX1cbiAgaGlkZGVuPXtoaWRlfVxuICBhcmlhLWhpZGRlbj17aGlkZSB8fCBpbnRlcnNlY3Rpbmd9XG4gIHN0eWxlPXthc2lkZVN0eWxlIHx8IG51bGx9XG4+XG4gIHsjaWYgIW9wZW4gJiYgIWRlc2t0b3AgJiYgaGVhZGluZ3MubGVuZ3RoID49IG1pbkl0ZW1zfVxuICAgIDxidXR0b25cbiAgICAgIG9uY2xpY2s9eyhldmVudCkgPT4ge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIG9wZW4gPSB0cnVlXG4gICAgICB9fVxuICAgICAgYXJpYS1sYWJlbD17b3BlbkJ1dHRvbkxhYmVsfVxuICAgICAgY2xhc3M9e29wZW5CdXR0b25DbGFzcyB8fCBudWxsfVxuICAgICAgc3R5bGU9e29wZW5CdXR0b25TdHlsZSB8fCBudWxsfVxuICAgID5cbiAgICAgIHsjaWYgb3BlblRvY0ljb259e0ByZW5kZXIgb3BlblRvY0ljb24oKX17OmVsc2V9XG4gICAgICAgIDwhLS0gaHR0cHM6Ly9pY29uaWZ5LmRlc2lnbi9pY29uLXNldHMvaGVyb2ljb25zLXNvbGlkL21lbnUuaHRtbCAtLT5cbiAgICAgICAgPHN2ZyB3aWR0aD1cIjFlbVwiIHsuLi5vcGVuQnV0dG9uSWNvblByb3BzfSB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICBkPVwiTTMgNWExIDEgMCAwIDEgMS0xaDEyYTEgMSAwIDEgMSAwIDJINGExIDEgMCAwIDEtMS0xem0wIDVhMSAxIDAgMCAxIDEtMWgxMmExIDEgMCAxIDEgMCAySDRhMSAxIDAgMCAxLTEtMXptMCA1YTEgMSAwIDAgMSAxLTFoMTJhMSAxIDAgMSAxIDAgMkg0YTEgMSAwIDAgMS0xLTF6XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L3N2Zz5cbiAgICAgIHsvaWZ9XG4gICAgPC9idXR0b24+XG4gIHsvaWZ9XG4gIHsjaWYgb3BlbiB8fCAoZGVza3RvcCAmJiBoZWFkaW5ncy5sZW5ndGggPj0gbWluSXRlbXMpfVxuICAgIDxuYXZcbiAgICAgIHRyYW5zaXRpb246Ymx1cj17Ymx1clBhcmFtc31cbiAgICAgIGJpbmQ6dGhpcz17bmF2fVxuICAgICAgY2xhc3M9e25hdkNsYXNzIHx8IG51bGx9XG4gICAgICBzdHlsZT17bmF2U3R5bGUgfHwgbnVsbH1cbiAgICA+XG4gICAgICB7I2lmIHRpdGxlfVxuICAgICAgICB7I2lmIHRpdGxlU25pcHBldH1cbiAgICAgICAgICB7QHJlbmRlciB0aXRsZVNuaXBwZXQoKX1cbiAgICAgICAgezplbHNlfVxuICAgICAgICAgIDxzdmVsdGU6ZWxlbWVudFxuICAgICAgICAgICAgdGhpcz17dGl0bGVUYWd9XG4gICAgICAgICAgICBjbGFzcz1cInRvYy10aXRsZSB0b2MtZXhjbHVkZSB7dGl0bGVFbGVtZW50Q2xhc3MgfHwgbnVsbH1cIlxuICAgICAgICAgICAgc3R5bGU9e3RpdGxlRWxlbWVudFN0eWxlIHx8IG51bGx9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3RpdGxlfVxuICAgICAgICAgIDwvc3ZlbHRlOmVsZW1lbnQ+XG4gICAgICAgIHsvaWZ9XG4gICAgICB7L2lmfVxuICAgICAgPG9sIHJvbGU9XCJtZW51XCIgY2xhc3M9e29sQ2xhc3MgfHwgbnVsbH0gc3R5bGU9e29sU3R5bGUgfHwgbnVsbH0+XG4gICAgICAgIHsjZWFjaCBoZWFkaW5ncyBhcyBoZWFkaW5nLCBpZHggKGAke2lkeH0tJHtoZWFkaW5nLmlkfWApfVxuICAgICAgICAgIHtAY29uc3QgaW5kZW50ID0gbGV2ZWxzW2lkeF0gLSBtaW5MZXZlbH1cbiAgICAgICAgICB7QGNvbnN0IGNvbGxhcHNlZCA9IGNvbGxhcHNlU3ViaGVhZGluZ3MgJiYgIWhlYWRpbmdfdmlzaWJpbGl0eVtpZHhdfVxuICAgICAgICAgIDxsaVxuICAgICAgICAgICAgcm9sZT1cIm1lbnVpdGVtXCJcbiAgICAgICAgICAgIHRhYmluZGV4PXtjb2xsYXBzZWQgPyAtMSA6IDB9XG4gICAgICAgICAgICBjbGFzczphY3RpdmU9e2hlYWRpbmcgPT09IGFjdGl2ZUhlYWRpbmd9XG4gICAgICAgICAgICBjbGFzczpjb2xsYXBzZWRcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPXtjb2xsYXBzZWQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgY2xhc3M9e2xpQ2xhc3MgfHwgbnVsbH1cbiAgICAgICAgICAgIGJpbmQ6dGhpcz17dG9jSXRlbXNbaWR4XX1cbiAgICAgICAgICAgIHN0eWxlPXtsaVN0eWxlIHx8IG51bGx9XG4gICAgICAgICAgICBzdHlsZTptYXJnaW4tbGVmdD1cImNhbGMoe2luZGVudH0gKiB2YXIoLS10b2MtaW5kZW50LXBlci1sZXZlbCwgMWVtKSlcIlxuICAgICAgICAgICAgc3R5bGU6Zm9udC1zaXplPVwibWF4KHZhcigtLXRvYy1saS1mb250LXNpemUtbWluLCAyZXgpLCBjYWxjKHZhcigtLXRvYy1saS1mb250LXNpemUtYmFzZSwgM2V4KSAtIHtpbmRlbnR9ICogdmFyKC0tdG9jLWxpLWZvbnQtc2l6ZS1zdGVwLCAwLjFleCkpKVwiXG4gICAgICAgICAgICBvbmNsaWNrPXtsaV9jbGlja19rZXlfaGFuZGxlcihoZWFkaW5nKX1cbiAgICAgICAgICAgIG9ua2V5ZG93bj17bGlfY2xpY2tfa2V5X2hhbmRsZXIoaGVhZGluZyl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyNpZiB0b2NJdGVtfVxuICAgICAgICAgICAgICB7QHJlbmRlciB0b2NJdGVtKGhlYWRpbmcpfVxuICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICB7Z2V0SGVhZGluZ1RpdGxlcyhoZWFkaW5nKX1cbiAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgey9lYWNofVxuICAgICAgPC9vbD5cbiAgICA8L25hdj5cbiAgey9pZn1cbjwvYXNpZGU+XG5cbjxzdHlsZT5cbiAgOndoZXJlKGFzaWRlLnRvYykge1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgaGVpZ2h0OiAtbW96LW1heC1jb250ZW50O1xuICAgIGhlaWdodDogbWF4LWNvbnRlbnQ7XG4gICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICBmb250LXNpemU6IHZhcigtLXRvYy1mb250LXNpemUsIDAuN2VtKTtcbiAgICBtaW4td2lkdGg6IHZhcigtLXRvYy1taW4td2lkdGgsIDE1ZW0pO1xuICAgIHdpZHRoOiB2YXIoLS10b2Mtd2lkdGgpO1xuICAgIHotaW5kZXg6IHZhcigtLXRvYy16LWluZGV4KTtcbiAgICB0ZXh0LXdyYXA6IHZhcigtLXRvYy10ZXh0LXdyYXAsIGJhbGFuY2UpO1xuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXM7XG4gIH1cbiAgOndoZXJlKGFzaWRlLnRvYyA+IG5hdikge1xuICAgIG92ZXJmbG93OiB2YXIoLS10b2Mtb3ZlcmZsb3csIGF1dG8pO1xuICAgIG92ZXJzY3JvbGwtYmVoYXZpb3I6IGNvbnRhaW47XG4gICAgbWF4LWhlaWdodDogdmFyKC0tdG9jLW1heC1oZWlnaHQsIDkwdmgpO1xuICAgIHBhZGRpbmc6IHZhcigtLXRvYy1wYWRkaW5nLCAxZW0gMWVtIDAgM2VtKTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIH1cbiAgYXNpZGUudG9jID4gbmF2ID4gb2wge1xuICAgIGxpc3Qtc3R5bGU6IHZhcigtLXRvYy1vbC1saXN0LXN0eWxlLCBub25lKTtcbiAgICBwYWRkaW5nOiB2YXIoLS10b2Mtb2wtcGFkZGluZywgMCk7XG4gICAgbWFyZ2luOiB2YXIoLS10b2Mtb2wtbWFyZ2luKTtcbiAgfVxuICA6d2hlcmUoYXNpZGUudG9jIC50b2MtdGl0bGUpIHtcbiAgICBwYWRkaW5nOiB2YXIoLS10b2MtdGl0bGUtcGFkZGluZyk7XG4gICAgbWFyZ2luOiB2YXIoLS10b2MtdGl0bGUtbWFyZ2luLCAxZW0gMCk7XG4gICAgZm9udC1zaXplOiB2YXIoLS10b2MtdGl0bGUtZm9udC1zaXplLCBpbml0aWFsKTtcbiAgICBjb2xvcjogdmFyKC0tdG9jLXRpdGxlLWNvbG9yKTtcbiAgICBmb250LXdlaWdodDogdmFyKC0tdG9jLXRpdGxlLWZvbnQtd2VpZ2h0KTtcbiAgfVxuICA6d2hlcmUoYXNpZGUudG9jID4gbmF2ID4gb2wgPiBsaSkge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBjb2xvcjogdmFyKC0tdG9jLWxpLWNvbG9yKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS10b2MtbGktYmcpO1xuICAgIGJvcmRlcjogdmFyKC0tdG9jLWxpLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tdG9jLWxpLWJvcmRlci1yYWRpdXMpO1xuICAgIG1hcmdpbjogdmFyKC0tdG9jLWxpLW1hcmdpbik7XG4gICAgcGFkZGluZzogdmFyKC0tdG9jLWxpLXBhZGRpbmcsIDJwdCA0cHQpO1xuICAgIGZvbnQ6IHZhcigtLXRvYy1saS1mb250KTtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS10b2MtbGktdHJhbnNpdGlvbik7XG4gIH1cbiAgYXNpZGUudG9jID4gbmF2ID4gb2wgPiBsaTpmb2N1cy12aXNpYmxlIHtcbiAgICBvdXRsaW5lOiB2YXIoLS10b2MtZm9jdXMtb3V0bGluZSwgMnB4IHNvbGlkIGN1cnJlbnRDb2xvcik7XG4gICAgb3V0bGluZS1vZmZzZXQ6IHZhcigtLXRvYy1mb2N1cy1vdXRsaW5lLW9mZnNldCwgMXB4KTtcbiAgfVxuICBhc2lkZS50b2MuY29sbGFwc2libGUgPiBuYXYgPiBvbCA+IGxpIHtcbiAgICBtYXgtaGVpZ2h0OiB2YXIoLS10b2MtbGktbWF4LWhlaWdodCwgMTBlbSk7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB0cmFuc2l0aW9uOlxuICAgICAgbWF4LWhlaWdodCB2YXIoLS10b2MtY29sbGFwc2UtZHVyYXRpb24sIDAuMnMpIGVhc2Utb3V0LFxuICAgICAgb3BhY2l0eSB2YXIoLS10b2MtY29sbGFwc2UtZHVyYXRpb24sIDAuMnMpIGVhc2Utb3V0LFxuICAgICAgcGFkZGluZyB2YXIoLS10b2MtY29sbGFwc2UtZHVyYXRpb24sIDAuMnMpIGVhc2Utb3V0LFxuICAgICAgbWFyZ2luIHZhcigtLXRvYy1jb2xsYXBzZS1kdXJhdGlvbiwgMC4ycykgZWFzZS1vdXQ7XG4gIH1cbiAgYXNpZGUudG9jLmNvbGxhcHNpYmxlID4gbmF2ID4gb2wgPiBsaS5jb2xsYXBzZWQge1xuICAgIG1heC1oZWlnaHQ6IDA7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwYWRkaW5nLWJsb2NrOiAwO1xuICAgIG1hcmdpbi1ibG9jazogMDtcbiAgfVxuICBhc2lkZS50b2MgPiBuYXYgPiBvbCA+IGxpOmhvdmVyIHtcbiAgICBjb2xvcjogdmFyKC0tdG9jLWxpLWhvdmVyLWNvbG9yKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS10b2MtbGktaG92ZXItYmcpO1xuICB9XG4gIGFzaWRlLnRvYyA+IG5hdiA+IG9sID4gbGkuYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS10b2MtYWN0aXZlLWJnKTtcbiAgICBjb2xvcjogdmFyKC0tdG9jLWFjdGl2ZS1jb2xvcik7XG4gICAgZm9udDogdmFyKC0tdG9jLWFjdGl2ZS1saS1mb250KTtcbiAgICB0ZXh0LXNoYWRvdzogdmFyKC0tdG9jLWFjdGl2ZS10ZXh0LXNoYWRvdyk7XG4gICAgYm9yZGVyOiB2YXIoLS10b2MtYWN0aXZlLWJvcmRlcik7XG4gICAgYm9yZGVyLXdpZHRoOiB2YXIoLS10b2MtYWN0aXZlLWJvcmRlci13aWR0aCk7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tdG9jLWFjdGl2ZS1ib3JkZXItcmFkaXVzLCAycHQpO1xuICB9XG4gIDp3aGVyZShhc2lkZS50b2MgPiBidXR0b24pIHtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm90dG9tOiB2YXIoLS10b2MtbW9iaWxlLWJ0bi1ib3R0b20sIDApO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250OiB2YXIoLS10b2MtbW9iaWxlLWJ0bi1mb250LCAyZW0gc2Fucy1zZXJpZik7XG4gICAgbGluZS1oZWlnaHQ6IHZhcigtLXRvYy1tb2JpbGUtYnRuLWxpbmUtaGVpZ2h0LCAwKTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IHZhcigtLXRvYy1tb2JpbGUtYnRuLXJpZ2h0LCAwKTtcbiAgICB6LWluZGV4OiB2YXIoLS10b2MtbW9iaWxlLWJ0bi16LWluZGV4LCAyKTtcbiAgICBwYWRkaW5nOiB2YXIoLS10b2MtbW9iaWxlLWJ0bi1wYWRkaW5nLCAycHQgM3B0KTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS10b2MtbW9iaWxlLWJ0bi1ib3JkZXItcmFkaXVzLCA0cHQpO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLXRvYy1tb2JpbGUtYnRuLWJnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMikpO1xuICAgIGNvbG9yOiB2YXIoLS10b2MtbW9iaWxlLWJ0bi1jb2xvciwgYmxhY2spO1xuICB9XG4gIDp3aGVyZShhc2lkZS50b2MgPiBuYXYgPiAudG9jLXRpdGxlKSB7XG4gICAgbWFyZ2luLXRvcDogdmFyKC0tdG9jLXRpdGxlLW1hcmdpbi10b3AsIDApO1xuICB9XG5cbiAgYXNpZGUudG9jLm1vYmlsZSB7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIGJvdHRvbTogdmFyKC0tdG9jLW1vYmlsZS1ib3R0b20sIDFlbSk7XG4gICAgcmlnaHQ6IHZhcigtLXRvYy1tb2JpbGUtcmlnaHQsIDFlbSk7XG4gIH1cbiAgYXNpZGUudG9jLm1vYmlsZSA+IG5hdiB7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tdG9jLW1vYmlsZS1ib3JkZXItcmFkaXVzLCAzcHQpO1xuICAgIHJpZ2h0OiB2YXIoLS10b2MtbW9iaWxlLXJpZ2h0LCAxZW0pO1xuICAgIHotaW5kZXg6IC0xO1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tdG9jLW1vYmlsZS1iZywgd2hpdGUpO1xuICAgIHdpZHRoOiB2YXIoLS10b2MtbW9iaWxlLXdpZHRoLCAxOGVtKTtcbiAgICBib3gtc2hhZG93OiB2YXIoLS10b2MtbW9iaWxlLXNoYWRvdyk7XG4gICAgYm9yZGVyOiB2YXIoLS10b2MtbW9iaWxlLWJvcmRlcik7XG4gIH1cbiAgYXNpZGUudG9jLmRlc2t0b3Age1xuICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tdG9jLWRlc2t0b3AtYmcpO1xuICAgIG1hcmdpbjogdmFyKC0tdG9jLWRlc2t0b3AtYXNpZGUtbWFyZ2luKTtcbiAgICBtYXgtd2lkdGg6IHZhcigtLXRvYy1kZXNrdG9wLW1heC13aWR0aCk7XG4gICAgdG9wOiB2YXIoLS10b2MtZGVza3RvcC1zdGlja3ktdG9wLCAyZW0pO1xuICB9XG5cbiAgYXNpZGUudG9jLmRlc2t0b3AgPiBuYXYge1xuICAgIG1hcmdpbjogdmFyKC0tdG9jLWRlc2t0b3AtbmF2LW1hcmdpbik7XG4gIH1cbiAgYXNpZGUudG9jLmludGVyc2VjdGluZyB7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0VBcVhFO0lBQ0Usc0JBQXNCO0lBQ3RCLHdCQUFtQjtJQUFuQixtQkFBbUI7SUFDbkIseUJBQXlCO0lBQ3pCLHNDQUFzQztJQUN0QyxxQ0FBcUM7SUFDckMsdUJBQXVCO0lBQ3ZCLDJCQUEyQjtJQUMzQix3Q0FBd0M7SUFDeEMseUJBQXlCOztFQUUzQjtJQUNFLG1DQUFtQztJQUNuQyw0QkFBNEI7SUFDNUIsdUNBQXVDO0lBQ3ZDLDBDQUEwQztJQUMxQyxrQkFBa0I7O0VBRXBCO0lBQ0UsMENBQTBDO0lBQzFDLGlDQUFpQztJQUNqQyw0QkFBNEI7O0VBRTlCO0lBQ0UsaUNBQWlDO0lBQ2pDLHNDQUFzQztJQUN0Qyw4Q0FBOEM7SUFDOUMsNkJBQTZCO0lBQzdCLHlDQUF5Qzs7RUFFM0M7SUFDRSxlQUFlO0lBQ2YsMEJBQTBCO0lBQzFCLDRCQUE0QjtJQUM1Qiw0QkFBNEI7SUFDNUIsMENBQTBDO0lBQzFDLDRCQUE0QjtJQUM1Qix1Q0FBdUM7SUFDdkMsd0JBQXdCO0lBQ3hCLG9DQUFvQzs7RUFFdEM7SUFDRSx5REFBeUQ7SUFDekQsb0RBQW9EOztFQUV0RDtJQUNFLDBDQUEwQztJQUMxQyxnQkFBZ0I7SUFDaEI7Ozs7d0RBSW9EOztFQUV0RDtJQUNFLGFBQWE7SUFDYixVQUFVO0lBQ1YsZ0JBQWdCO0lBQ2hCLGVBQWU7O0VBRWpCO0lBQ0UsZ0NBQWdDO0lBQ2hDLGtDQUFrQzs7RUFFcEM7SUFDRSxnQ0FBZ0M7SUFDaEMsOEJBQThCO0lBQzlCLCtCQUErQjtJQUMvQiwwQ0FBMEM7SUFDMUMsZ0NBQWdDO0lBQ2hDLDRDQUE0QztJQUM1QyxtREFBbUQ7O0VBRXJEO0lBQ0UsWUFBWTtJQUNaLHVDQUF1QztJQUN2QyxlQUFlO0lBQ2YsZ0RBQWdEO0lBQ2hELGlEQUFpRDtJQUNqRCxrQkFBa0I7SUFDbEIscUNBQXFDO0lBQ3JDLHlDQUF5QztJQUN6QywrQ0FBK0M7SUFDL0MsdURBQXVEO0lBQ3ZELDhEQUE4RDtJQUM5RCx5Q0FBeUM7O0VBRTNDO0lBQ0UsMENBQTBDOzs7RUFHNUM7SUFDRSxlQUFlO0lBQ2YscUNBQXFDO0lBQ3JDLG1DQUFtQzs7RUFFckM7SUFDRSxtREFBbUQ7SUFDbkQsbUNBQW1DO0lBQ25DLFdBQVc7SUFDWCxzQkFBc0I7SUFDdEIsdUNBQXVDO0lBQ3ZDLG9DQUFvQztJQUNwQyxvQ0FBb0M7SUFDcEMsZ0NBQWdDOztFQUVsQztJQUNFLGdCQUFnQjtJQUNoQixpQ0FBaUM7SUFDakMsdUNBQXVDO0lBQ3ZDLHVDQUF1QztJQUN2Qyx1Q0FBdUM7OztFQUd6QztJQUNFLHFDQUFxQzs7RUFFdkM7SUFDRSxVQUFVO0lBQ1Ysb0JBQW9CIiwiaWdub3JlTGlzdCI6W119 */"
};
function Toc($$anchor, $$props) {
  check_target(new.target);
  push($$props, true, Toc);
  append_styles($$anchor, $$css);
  var $$ownership_validator = create_ownership_validator($$props);
  let activeHeading = prop($$props, "activeHeading", 15, null), activeHeadingScrollOffset = prop($$props, "activeHeadingScrollOffset", 3, 100), activeTocLi = prop($$props, "activeTocLi", 15, null), aside = prop($$props, "aside", 15), breakpoint = prop($$props, "breakpoint", 3, 1e3), desktop = prop($$props, "desktop", 15, true), flashClickedHeadingsFor = prop($$props, "flashClickedHeadingsFor", 3, 1500), getHeadingIds = prop($$props, "getHeadingIds", 3, (node) => node.id), getHeadingLevels = prop($$props, "getHeadingLevels", 3, (node) => Number(node.nodeName[1])), getHeadingTitles = prop($$props, "getHeadingTitles", 3, (node) => node.textContent ?? ``), headings = prop($$props, "headings", 31, () => tag_proxy(proxy([]), "headings")), headingSelector = prop($$props, "headingSelector", 19, () => `:is(h2, h3, h4):not(.toc-exclude)`), hide = prop($$props, "hide", 15, false), hideOnIntersect = prop($$props, "hideOnIntersect", 3, null), autoHide = prop($$props, "autoHide", 3, true), keepActiveTocItemInView = prop($$props, "keepActiveTocItemInView", 3, true), minItems = prop($$props, "minItems", 3, 0), nav = prop($$props, "nav", 15), open = prop($$props, "open", 15, false), openButtonLabel = prop($$props, "openButtonLabel", 19, () => `Open table of contents`), reactToKeys = prop($$props, "reactToKeys", 19, () => [`ArrowDown`, `ArrowUp`, ` `, `Enter`, `Escape`, `Tab`]), scrollBehavior = prop($$props, "scrollBehavior", 19, () => `smooth`), title = prop($$props, "title", 19, () => `On this page`), titleTag = prop($$props, "titleTag", 19, () => `h2`), tocItems = prop($$props, "tocItems", 31, () => tag_proxy(proxy([]), "tocItems")), warnOnEmpty = prop($$props, "warnOnEmpty", 3, false), collapseSubheadings = prop($$props, "collapseSubheadings", 3, false), blurParams = prop($$props, "blurParams", 19, () => ({ duration: 200 })), asideStyle = prop($$props, "asideStyle", 19, () => ``), asideClass = prop($$props, "asideClass", 19, () => ``), navStyle = prop($$props, "navStyle", 19, () => ``), navClass = prop($$props, "navClass", 19, () => ``), titleElementStyle = prop($$props, "titleElementStyle", 19, () => ``), titleElementClass = prop($$props, "titleElementClass", 19, () => ``), olStyle = prop($$props, "olStyle", 19, () => ``), olClass = prop($$props, "olClass", 19, () => ``), liStyle = prop($$props, "liStyle", 19, () => ``), liClass = prop($$props, "liClass", 19, () => ``), openButtonStyle = prop($$props, "openButtonStyle", 19, () => ``), openButtonClass = prop($$props, "openButtonClass", 19, () => ``), openButtonIconProps = prop($$props, "openButtonIconProps", 19, () => ({})), rest = rest_props(
    $$props,
    [
      "$$slots",
      "$$events",
      "$$legacy",
      "activeHeading",
      "activeHeadingScrollOffset",
      "activeTocLi",
      "aside",
      "breakpoint",
      "desktop",
      "flashClickedHeadingsFor",
      "getHeadingIds",
      "getHeadingLevels",
      "getHeadingTitles",
      "headings",
      "headingSelector",
      "hide",
      "hideOnIntersect",
      "autoHide",
      "keepActiveTocItemInView",
      "minItems",
      "nav",
      "open",
      "openButtonLabel",
      "reactToKeys",
      "scrollBehavior",
      "title",
      "titleTag",
      "tocItems",
      "warnOnEmpty",
      "collapseSubheadings",
      "blurParams",
      "openTocIcon",
      "titleSnippet",
      "tocItem",
      "onOpen",
      "asideStyle",
      "asideClass",
      "navStyle",
      "navClass",
      "titleElementStyle",
      "titleElementClass",
      "olStyle",
      "olClass",
      "liStyle",
      "liClass",
      "openButtonStyle",
      "openButtonClass",
      "openButtonIconProps"
    ],
    "rest"
  );
  let window_width = tag(state(0), "window_width");
  let page_has_scrolled = tag(state(false), "page_has_scrolled");
  let intersecting = tag(state(false), "intersecting");
  let scroll_target = tag(state(null), "scroll_target");
  let scroll_target_timeout = null;
  let prev_scroll_target_distance = Infinity;
  function clear_scroll_target() {
    if (scroll_target_timeout) {
      clearTimeout(scroll_target_timeout);
      scroll_target_timeout = null;
    }
    set(scroll_target, null);
    prev_scroll_target_distance = Infinity;
  }
  function set_scroll_target(node) {
    const idx = headings().indexOf(node);
    if (idx < 0) return;
    activeHeading(node);
    activeTocLi(tocItems()[idx]);
    set(scroll_target, node, true);
    prev_scroll_target_distance = Infinity;
    if (scroll_target_timeout) clearTimeout(scroll_target_timeout);
    scroll_target_timeout = setTimeout(
      () => {
        clear_scroll_target();
      },
      1e3
    );
  }
  let levels = tag(user_derived(() => headings().map(getHeadingLevels())), "levels");
  let minLevel = tag(user_derived(() => Math.min(...get(levels)) || 0), "minLevel");
  let collapse_threshold = tag(
    user_derived(() => strict_equals(collapseSubheadings(), true) ? 6 : strict_equals(typeof collapseSubheadings(), `string`) ? parseInt(collapseSubheadings().slice(1), 10) : Infinity),
    "collapse_threshold"
  );
  function is_expanded(idx) {
    if (strict_equals(headings()[idx], activeHeading())) return true;
    const level = get(levels)[idx];
    for (let jdx = idx + 1; jdx < headings().length && get(levels)[jdx] > level; jdx++) {
      if (strict_equals(headings()[jdx], activeHeading())) return true;
    }
    return false;
  }
  let heading_visibility = tag(
    user_derived(() => {
      if (!collapseSubheadings() || strict_equals(activeHeading(), null)) {
        return Array(headings().length).fill(true);
      }
      const visible = [];
      for (let idx = 0; idx < headings().length; idx++) {
        const level = get(levels)[idx];
        if (strict_equals(level, get(minLevel))) {
          visible.push(true);
        } else if (level <= get(collapse_threshold)) {
          let parent_idx = idx - 1;
          while (parent_idx >= 0 && get(levels)[parent_idx] >= level) parent_idx--;
          visible.push(parent_idx < 0 || is_expanded(parent_idx));
        } else {
          let ancestor_idx = idx - 1;
          while (ancestor_idx >= 0 && get(levels)[ancestor_idx] > get(collapse_threshold)) {
            ancestor_idx--;
          }
          visible.push(ancestor_idx < 0 || get(levels)[ancestor_idx] < get(collapse_threshold) || visible[ancestor_idx]);
        }
      }
      return visible;
    }),
    "heading_visibility"
  );
  user_effect(() => $$props.onOpen?.({ open: open() }));
  user_effect(() => {
    desktop(get(window_width) > breakpoint());
  });
  user_effect(() => {
    void headings();
    void hideOnIntersect();
    check_toc_overlap();
  });
  function close(event2) {
    if (!aside()?.contains(event2.target)) open(false);
  }
  function update_toc_headings() {
    if (strict_equals(typeof document, `undefined`)) return;
    const new_headings = Array.from(document.querySelectorAll(headingSelector()));
    untrack(() => {
      headings(new_headings);
      set_active_heading();
      if (strict_equals(headings().length, 0)) {
        if (warnOnEmpty()) {
          console.warn(`svelte-toc found no headings for headingSelector='${headingSelector()}'. ${autoHide() ? `Hiding` : `Showing empty`} table of contents.`);
        }
        if (autoHide()) hide(true);
      } else if (hide() && autoHide()) hide(false);
    });
  }
  user_effect(update_toc_headings);
  user_effect(() => {
    const observer = new MutationObserver(update_toc_headings);
    observer.observe(document.body, {
      childList: true,
      // Watch for added/removed nodes
      subtree: true,
      // Watch all descendants, not just direct children
      characterData: true
      // Watch for text content changes
    });
    return () => observer.disconnect();
  });
  function set_active_heading() {
    if (get(scroll_target)) {
      const target_rect = get(scroll_target).getBoundingClientRect();
      const distance = Math.abs(target_rect.top - activeHeadingScrollOffset());
      if (distance > prev_scroll_target_distance + 50) {
        clear_scroll_target();
      } else {
        prev_scroll_target_distance = distance;
        return;
      }
    }
    let idx = headings().length;
    while (idx--) {
      const { top } = headings()[idx].getBoundingClientRect();
      if (top < activeHeadingScrollOffset() || strict_equals(idx, 0)) {
        activeHeading(headings()[idx]);
        activeTocLi(tocItems()[idx]);
        return;
      }
    }
  }
  function check_toc_overlap() {
    if (!hideOnIntersect() || !aside() || !desktop()) {
      set(intersecting, false);
      return;
    }
    const elements = strict_equals(typeof hideOnIntersect(), `string`) ? Array.from(document.querySelectorAll(hideOnIntersect())) : hideOnIntersect();
    const toc = aside().getBoundingClientRect();
    set(
      intersecting,
      elements.some((el) => {
        const rect = el.getBoundingClientRect();
        return !(toc.right < rect.left || toc.left > rect.right || toc.bottom < rect.top || toc.top > rect.bottom);
      }),
      true
    );
  }
  const li_click_key_handler = (node) => (event2) => {
    if (event2 instanceof KeyboardEvent && ![`Enter`, ` `].includes(event2.key)) {
      return;
    }
    open(false);
    set_scroll_target(node);
    node.scrollIntoView?.({ behavior: scrollBehavior(), block: `start` });
    const id = getHeadingIds()(node);
    if (id) history.replaceState({}, ``, `#${id}`);
    if (flashClickedHeadingsFor()) {
      node.classList.add(`toc-clicked`);
      setTimeout(() => node.classList.remove(`toc-clicked`), flashClickedHeadingsFor());
    }
  };
  function scroll_to_active_toc_item(behavior = `smooth`) {
    if (keepActiveTocItemInView() && activeTocLi() && nav()) {
      const top = activeTocLi()?.offsetTop - nav().offsetHeight / 2;
      nav()?.scrollTo?.({ top, behavior });
    }
  }
  user_effect(() => {
    if (open() && nav()) {
      set_active_heading();
      scroll_to_active_toc_item(`instant`);
    }
  });
  function on_keydown(event2) {
    if (!reactToKeys() || !reactToKeys().includes(event2.key)) return;
    const hovered = [...document.querySelectorAll(`:hover`)].at(-1);
    const toc_is_hovered = hovered && nav()?.contains(hovered);
    if (
      // return early if ToC does not have focus
      strict_equals(event2.key, `Tab`) && !nav()?.contains(document.activeElement) || // ignore keyboard events when ToC is closed on mobile or when ToC is not currently hovered on desktop
      !desktop() && !open() || desktop() && !toc_is_hovered
    ) return;
    event2.preventDefault();
    if (strict_equals(event2.key, `Escape`) && open()) open(false);
    else if (strict_equals(event2.key, `Tab`) && !aside()?.contains(document.activeElement)) {
      open(false);
    } else if (activeTocLi()) {
      if (strict_equals(event2.key, `ArrowDown`)) {
        let next = activeTocLi().nextElementSibling;
        while (next?.classList.contains(`collapsed`)) {
          next = next.nextElementSibling;
        }
        if (next) activeTocLi(next);
      }
      if (strict_equals(event2.key, `ArrowUp`)) {
        let prev = activeTocLi().previousElementSibling;
        while (prev?.classList.contains(`collapsed`)) {
          prev = prev.previousElementSibling;
        }
        if (prev) activeTocLi(prev);
      }
      activeHeading(headings()[tocItems().indexOf(activeTocLi())]);
    }
    if (activeTocLi() && [` `, `Enter`].includes(event2.key) && activeHeading()) {
      set_scroll_target(activeHeading());
      activeHeading().scrollIntoView({ behavior: scrollBehavior(), block: `start` });
    }
  }
  var $$exports = { ...legacy_api() };
  var aside_1 = root();
  event("scroll", $window, function scroll() {
    set(page_has_scrolled, true);
    set_active_heading();
    check_toc_overlap();
  });
  event("click", $window, close);
  event("scrollend", $window, function scrollend() {
    clear_scroll_target();
    if (!get(page_has_scrolled)) return;
    scroll_to_active_toc_item();
  });
  event("resize", $window, function resize() {
    desktop(get(window_width) > breakpoint());
    set_active_heading();
    check_toc_overlap();
  });
  event("keydown", $window, on_keydown);
  attribute_effect(
    aside_1,
    () => ({
      ...rest,
      class: `toc ${(asideClass() || "") ?? ""}`,
      hidden: hide(),
      "aria-hidden": hide() || get(intersecting),
      style: asideStyle() || null,
      [CLASS]: {
        collapsible: collapseSubheadings(),
        desktop: desktop(),
        hidden: hide(),
        intersecting: get(intersecting),
        mobile: !desktop()
      }
    }),
    void 0,
    void 0,
    void 0,
    "s-4xclNQEcWVGh"
  );
  var node_1 = child(aside_1);
  {
    var consequent_1 = ($$anchor2) => {
      var button = root_1();
      var node_2 = child(button);
      {
        var consequent = ($$anchor3) => {
          var fragment = comment();
          var node_3 = first_child(fragment);
          add_svelte_meta(() => snippet(node_3, () => $$props.openTocIcon), "render", Toc, 313, 23);
          append($$anchor3, fragment);
        };
        var alternate = ($$anchor3) => {
          var svg = root_3();
          attribute_effect(
            svg,
            () => ({
              width: "1em",
              ...openButtonIconProps(),
              viewBox: "0 0 20 20",
              fill: "currentColor"
            }),
            void 0,
            void 0,
            void 0,
            "s-4xclNQEcWVGh"
          );
          append($$anchor3, svg);
        };
        add_svelte_meta(
          () => if_block(node_2, ($$render) => {
            if ($$props.openTocIcon) $$render(consequent);
            else $$render(alternate, false);
          }),
          "if",
          Toc,
          313,
          6
        );
      }
      reset(button);
      template_effect(() => {
        set_attribute(button, "aria-label", openButtonLabel());
        set_class(button, 1, clsx(openButtonClass() || null), "s-4xclNQEcWVGh");
        set_style(button, openButtonStyle() || null);
      });
      delegated("click", button, function click(event2) {
        event2.stopPropagation();
        event2.preventDefault();
        open(true);
      });
      append($$anchor2, button);
    };
    add_svelte_meta(
      () => if_block(node_1, ($$render) => {
        if (!open() && !desktop() && headings().length >= minItems()) $$render(consequent_1);
      }),
      "if",
      Toc,
      302,
      2
    );
  }
  var node_4 = sibling(node_1, 2);
  {
    var consequent_5 = ($$anchor2) => {
      var nav_1 = root_4();
      var node_5 = child(nav_1);
      {
        var consequent_3 = ($$anchor3) => {
          var fragment_1 = comment();
          var node_6 = first_child(fragment_1);
          {
            var consequent_2 = ($$anchor4) => {
              var fragment_2 = comment();
              var node_7 = first_child(fragment_2);
              add_svelte_meta(() => snippet(node_7, () => $$props.titleSnippet), "render", Toc, 332, 10);
              append($$anchor4, fragment_2);
            };
            var alternate_1 = ($$anchor4) => {
              var fragment_3 = comment();
              var node_8 = first_child(fragment_3);
              {
                validate_dynamic_element_tag(titleTag);
                validate_void_dynamic_element(titleTag);
                element(
                  node_8,
                  titleTag,
                  false,
                  ($$element, $$anchor5) => {
                    attribute_effect(
                      $$element,
                      () => ({
                        class: `toc-title toc-exclude ${(titleElementClass() || "") ?? ""}`,
                        style: titleElementStyle() || null
                      }),
                      void 0,
                      void 0,
                      void 0,
                      "s-4xclNQEcWVGh"
                    );
                    var text2 = text();
                    template_effect(() => set_text(text2, title()));
                    append($$anchor5, text2);
                  },
                  void 0,
                  [334, 10]
                );
              }
              append($$anchor4, fragment_3);
            };
            add_svelte_meta(
              () => if_block(node_6, ($$render) => {
                if ($$props.titleSnippet) $$render(consequent_2);
                else $$render(alternate_1, false);
              }),
              "if",
              Toc,
              331,
              8
            );
          }
          append($$anchor3, fragment_1);
        };
        add_svelte_meta(
          () => if_block(node_5, ($$render) => {
            if (title()) $$render(consequent_3);
          }),
          "if",
          Toc,
          330,
          6
        );
      }
      var ol = sibling(node_5, 2);
      add_svelte_meta(
        () => each(ol, 23, headings, (heading, idx) => `${idx}-${heading.id}`, ($$anchor3, heading, idx) => {
          const indent = tag(user_derived(() => get(levels)[get(idx)] - get(minLevel)), "indent");
          get(indent);
          const collapsed = tag(user_derived(() => collapseSubheadings() && !get(heading_visibility)[get(idx)]), "collapsed");
          get(collapsed);
          var li = root_9();
          let classes;
          let styles;
          var event_handler = user_derived(() => li_click_key_handler(get(heading)));
          var event_handler_1 = user_derived(() => li_click_key_handler(get(heading)));
          var node_9 = child(li);
          {
            var consequent_4 = ($$anchor4) => {
              var fragment_5 = comment();
              var node_10 = first_child(fragment_5);
              add_svelte_meta(() => snippet(node_10, () => $$props.tocItem, () => get(heading)), "render", Toc, 362, 14);
              append($$anchor4, fragment_5);
            };
            var alternate_2 = ($$anchor4) => {
              var text_1 = text();
              template_effect(($0) => set_text(text_1, $0), [() => getHeadingTitles()(get(heading))]);
              append($$anchor4, text_1);
            };
            add_svelte_meta(
              () => if_block(node_9, ($$render) => {
                if ($$props.tocItem) $$render(consequent_4);
                else $$render(alternate_2, false);
              }),
              "if",
              Toc,
              361,
              12
            );
          }
          reset(li);
          validate_binding("bind:this={tocItems[idx]}", [], tocItems, () => get(idx), 354, 12);
          bind_this(li, ($$value, idx2) => $$ownership_validator.mutation("tocItems", ["tocItems", idx2], tocItems(tocItems()[idx2] = $$value, true), 354, 23), (idx2) => tocItems()?.[idx2], () => [get(idx)]);
          template_effect(() => {
            set_attribute(li, "tabindex", get(collapsed) ? -1 : 0);
            set_attribute(li, "aria-hidden", get(collapsed) || void 0);
            classes = set_class(li, 1, clsx(liClass() || null), "s-4xclNQEcWVGh", classes, {
              active: strict_equals(get(heading), activeHeading()),
              collapsed: get(collapsed)
            });
            styles = set_style(li, liStyle() || null, styles, {
              "margin-left": `calc(${get(indent) ?? ""} * var(--toc-indent-per-level, 1em))`,
              "font-size": `max(var(--toc-li-font-size-min, 2ex), calc(var(--toc-li-font-size-base, 3ex) - ${get(indent) ?? ""} * var(--toc-li-font-size-step, 0.1ex)))`
            });
          });
          delegated("click", li, function(...$$args) {
            apply(() => get(event_handler), this, $$args, Toc, [358, 21], true);
          });
          delegated("keydown", li, function(...$$args) {
            apply(() => get(event_handler_1), this, $$args, Toc, [359, 23], true);
          });
          append($$anchor3, li);
        }),
        "each",
        Toc,
        344,
        8
      );
      reset(ol);
      reset(nav_1);
      bind_this(nav_1, ($$value) => nav($$value), () => nav());
      template_effect(() => {
        set_class(nav_1, 1, clsx(navClass() || null), "s-4xclNQEcWVGh");
        set_style(nav_1, navStyle() || null);
        set_class(ol, 1, clsx(olClass() || null), "s-4xclNQEcWVGh");
        set_style(ol, olStyle() || null);
      });
      transition(3, nav_1, () => blur, blurParams);
      append($$anchor2, nav_1);
    };
    add_svelte_meta(
      () => if_block(node_4, ($$render) => {
        if (open() || desktop() && headings().length >= minItems()) $$render(consequent_5);
      }),
      "if",
      Toc,
      323,
      2
    );
  }
  reset(aside_1);
  bind_this(aside_1, ($$value) => aside($$value), () => aside());
  bind_window_size("innerWidth", function set2($$value) {
    set(window_width, $$value, true);
  });
  append($$anchor, aside_1);
  return pop($$exports);
}
if (import.meta.hot) {
  Toc = hmr(Toc);
  import.meta.hot.accept((module) => {
    cleanup_styles("s-4xclNQEcWVGh");
    Toc[HMR].update(module.default);
  });
}
var Toc_default = Toc;
delegate(["click", "keydown"]);
export {
  Toc_default as Toc,
  Toc_default as default
};
//# sourceMappingURL=svelte-toc.js.map
